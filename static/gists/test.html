<div id="feedbaas_container">
    <a href="#" onClick="callAjax(1)" id="feedbaas_btn1">>:(</a>
    <a href="#" onClick="callAjax(2)" id="feedbaas_btn2">:(</a>
    <a href="#" onClick="callAjax(3)" id="feedbaas_btn3">:|</a>
    <a href="#" onClick="callAjax(4)" id="feedbaas_btn4">:)</a>
    <a href="#" onClick="callAjax(5)" id="feedbaas_btn5">:D</a>
</div>
<style>
    #feedbaas_container {
        display: block;
        padding: 10px 10px 0;
        background: hsl(49, 83%, 91%);
        text-align: center;
    }

    #feedbaas_container a {
        font-size: 1.1em;
        padding: 24px 26px;
        display: inline-block;
        margin: 5px;
        border-radius: 6px;
        border: solid rgba(0, 0, 0, 0.2);
        border-width: 1px 1px 5px;
        box-shadow: 0 5px 0 rgba(0, 0, 0, 0.1), inset 0 0 3px rgba(255, 255, 255, 0.3);
        cursor: pointer;
        user-select: none;
        transition: 0.4s ease;
    }

    #feedbaas_container a:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 0 rgba(0, 0, 0, 0.1), inset 0 0 1px rgba(255, 255, 255, 0.4);
        border-bottom-width: 8px;
    }

    #feedbaas_container a:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1), inset 0 0 5px rgba(255, 255, 255, 0.4);
        border-bottom-width: 2px;
        transition: 0.1s ease;
    }

    #feedbaas_container a:nth-child(1) {
        background: #9a2204;
        color: rgba(255, 255, 255, 0.95);
        text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.1);
    }

    #feedbaas_container a:nth-child(2) {
        background: #a05203;
    }

    #feedbaas_container a:nth-child(3) {
        background: #a68503;
    }

    #feedbaas_container a:nth-child(2) {
        background: #8DC408;
    }

    #feedbaas_container a:nth-child(2) {
        background: #42C90E;
    }
</style>

<script>
  var feedbaas_options = {
    tenant: 1,
    extraFields: {
      'name': 'value'
    },
    buttons: {
      1: 'Nope! nopenopenope!',
      2: 'Somewhat of a clusterf*ck',
      3: '6/10, 8/10 With Rice',
      4: '13/10, good as h*ck',
      5: '7/5, The perfect score'
    }
  };


  (function () {
    if (feedbaas_options) {
      window.FEEDBAAS_PAGE_START = new Date().getTime();
      getGeo();
      if (feedbaas_options.buttons) {
        for (var i = 1; i <= 5; i++) {
          document.getElementById("feedbaas_btn" + i).innerHTML = feedbaas_options.buttons[i];
        }
      }
    }
  })();

  function guid() {
    var cookie = getCookie('feedbaas');
    if (cookie !== "") return cookie;
    var guid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
      return v.toString(16);
    });
    var date = new Date();
    date.setTime(date.getTime() + (10 * 365 * 24 * 60 * 60 * 1000));
    document.cookie = 'feedbaas =' + guid + '; expires=' + date.toGMTString() + '; path=/';
    return guid;
  }


  function getCookie(c_name) {
    if (document.cookie.length > 0) {
      c_start = document.cookie.indexOf(c_name + "=");
      if (c_start != -1) {
        c_start = c_start + c_name.length + 1;
        c_end = document.cookie.indexOf(";", c_start);
        if (c_end == -1) {
          c_end = document.cookie.length;
        }
        return unescape(document.cookie.substring(c_start, c_end));
      }
    }
    return "";
  }

  function callAjax(rating) {
    var url = 'https://www.feedbaas.com/api/rate';
    var xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.setRequestHeader('Content-type', 'application/json');
    xhr.onreadystatechange = function () {
      if (xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) {
        console.log('successfullyRated');
      }
    };
    feedbaas_options.currentUrl = window.location.href;
    feedbaas_options.referrerUrl = document.referrer;
    feedbaas_options.title = document.title;
    feedbaas_options.guid = guid();
    feedbaas_options.timeSpent = new Date().getTime() - FEEDBAAS_PAGE_START;
    feedbaas_options.value = rating;
    feedbaas_options.get = window.FEEDBAAS_GEO;
    xhr.send(JSON.stringify(feedbaas_options));
  }

  function getGeo() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function () {
      if (xmlhttp.readyState == XMLHttpRequest.DONE && xmlhttp.status == 200) {
        window.FEEDBAAS_GEO = JSON.parse(xmlhttp.responseText);
      } else {
        window.FEEDBAAS_GEO = {};
      }

    };
    xmlhttp.open("GET", "http://freegeoip.net/json/", true);
    xmlhttp.send();
  }


</script>

